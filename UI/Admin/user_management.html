<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý tài khoản người dùng - SmartRent Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");

      * {
        font-family: "Inter", sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        background-attachment: fixed;
      }

      .glass-effect {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .sidebar-gradient {
        background: linear-gradient(180deg, #1a1f36 0%, #0f1419 100%);
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        box-shadow: 0 4px 15px 0 rgba(102, 126, 234, 0.4);
        transform: translateY(0);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px 0 rgba(102, 126, 234, 0.6);
      }

      .btn-primary:active {
        transform: translateY(0);
      }

      .btn-danger {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        box-shadow: 0 4px 15px 0 rgba(245, 87, 108, 0.4);
        transform: translateY(0);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-danger:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px 0 rgba(245, 87, 108, 0.6);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        color: #4a5568;
        box-shadow: 0 4px 15px 0 rgba(168, 237, 234, 0.3);
        transform: translateY(0);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px 0 rgba(168, 237, 234, 0.5);
      }

      .input-modern {
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
      }

      .input-modern:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        outline: none;
      }

      .badge-modern {
        padding: 6px 14px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 11px;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-modern {
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
      }

      .card-modern:hover {
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);
      }

      .sidebar-link {
        transition: all 0.3s ease;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
      }

      .sidebar-link::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 3px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transform: scaleY(0);
        transition: transform 0.3s ease;
      }

      .sidebar-link:hover::before,
      .sidebar-link.active::before {
        transform: scaleY(1);
      }

      .sidebar-link:hover {
        background: rgba(102, 126, 234, 0.1);
        transform: translateX(5px);
      }

      .sidebar-link.active {
        background: rgba(102, 126, 234, 0.15);
      }

      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        background: white;
        min-width: 180px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        z-index: 1;
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid rgba(0, 0, 0, 0.05);
      }

      .dropdown-content.show {
        display: block;
        animation: dropdownSlide 0.3s ease;
      }

      @keyframes dropdownSlide {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .dropdown-content a,
      .dropdown-content button {
        transition: all 0.2s ease;
      }

      .dropdown-content a:hover,
      .dropdown-content button:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white !important;
      }

      .spinner {
        border: 4px solid rgba(102, 126, 234, 0.2);
        border-radius: 50%;
        border-top: 4px solid #667eea;
        width: 4rem;
        height: 4rem;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 1000;
        overflow-y: auto;
        backdrop-filter: blur(5px);
      }

      .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
        animation: modalFadeIn 0.3s ease;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        max-width: 32rem;
        width: 100%;
        transform: translateY(-50px);
        transition: transform 0.3s ease-out;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      }

      .modal.show .modal-content {
        transform: translateY(0);
        animation: modalSlideUp 0.3s ease;
      }

      @keyframes modalSlideUp {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .table-row {
        transition: all 0.2s ease;
      }

      .table-row:hover {
        background: linear-gradient(
          90deg,
          rgba(102, 126, 234, 0.05) 0%,
          rgba(118, 75, 162, 0.05) 100%
        );
        transform: scale(1.01);
      }

      .avatar-ring {
        border: 2px solid transparent;
        background:
          linear-gradient(white, white) padding-box,
          linear-gradient(135deg, #667eea 0%, #764ba2 100%) border-box;
      }

      .search-box {
        position: relative;
      }

      .search-box::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .search-box:focus-within::after {
        transform: scaleX(1);
      }

      .page-number {
        transition: all 0.3s ease;
      }

      .page-number:hover {
        transform: scale(1.1);
      }

      .page-number.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }

      .header-gradient {
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.1) 0%,
          rgba(118, 75, 162, 0.1) 100%
        );
        backdrop-filter: blur(10px);
      }

      @media (max-width: 768px) {
        .mobile-sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s ease-out;
        }

        .mobile-sidebar.show {
          transform: translateX(0);
        }
      }

      .checkbox-modern {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #d1d5db;
        border-radius: 4px;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
      }

      .checkbox-modern:checked {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-color: #667eea;
      }

      .checkbox-modern:checked::after {
        content: "✓";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 14px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="flex h-screen">
      <!-- Sidebar - Desktop -->
      <div
        class="hidden md:flex md:flex-col md:w-64 md:fixed md:inset-y-0 sidebar-gradient text-white"
      >
        <div
          class="flex items-center justify-center h-20 border-b border-gray-700"
        >
          <div class="flex items-center space-x-3">
            <div
              class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center"
            >
              <i class="fas fa-home text-white text-lg"></i>
            </div>
            <span
              class="text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent"
              >SmartRent</span
            >
          </div>
        </div>

        <div class="flex flex-col flex-1 overflow-y-auto py-6 px-3">
          <nav class="space-y-2">
            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-home w-5 h-5 mr-3"></i>
              <span>Trang chủ</span>
            </a>

            <a href="#" class="sidebar-link active flex items-center px-4 py-3">
              <i class="fas fa-users w-5 h-5 mr-3"></i>
              <span>Quản lý người dùng</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-database w-5 h-5 mr-3"></i>
              <span>Quản lý bất động sản</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-chart-pie w-5 h-5 mr-3"></i>
              <span>Thống kê báo cáo</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-shield-alt w-5 h-5 mr-3"></i>
              <span>Giám sát & Sự cố</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-cog w-5 h-5 mr-3"></i>
              <span>Cài đặt</span>
            </a>
          </nav>
        </div>

        <div class="p-4 border-t border-gray-700">
          <div
            class="flex items-center space-x-3 bg-gray-800 bg-opacity-50 rounded-xl p-3"
          >
            <img
              src="https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?w=40&h=40&fit=crop&crop=faces"
              alt="Admin"
              class="w-10 h-10 rounded-full object-cover avatar-ring"
            />
            <div class="flex-1">
              <p class="font-semibold text-sm">Lê Văn Cường</p>
              <p class="text-xs text-gray-400">Administrator</p>
            </div>

            <button class="text-gray-400 hover:text-white transition-colors">
              <i class="fas fa-sign-out-alt w-5 h-5"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Header -->
      <div
        class="md:hidden fixed top-0 left-0 right-0 z-50 sidebar-gradient text-white"
      >
        <div class="flex items-center justify-between p-4">
          <div class="flex items-center space-x-2">
            <div
              class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center"
            >
              <i class="fas fa-home text-white text-sm"></i>
            </div>
            <span class="text-lg font-bold">SmartRent</span>
          </div>
          <button
            id="mobile-menu-button"
            class="text-gray-300 hover:text-white transition-colors"
          >
            <i class="fas fa-bars w-6 h-6"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Sidebar -->
      <div
        id="mobile-sidebar"
        class="fixed inset-0 z-40 md:hidden"
        style="display: none"
      >
        <div
          id="mobile-sidebar-backdrop"
          class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm"
        ></div>

        <div
          class="fixed inset-y-0 left-0 z-40 w-64 sidebar-gradient text-white mobile-sidebar"
        >
          <div
            class="flex items-center justify-between h-16 border-b border-gray-700 px-4"
          >
            <div class="flex items-center space-x-2">
              <div
                class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center"
              >
                <i class="fas fa-home text-white text-sm"></i>
              </div>
              <span class="text-lg font-bold">SmartRent</span>
            </div>
            <button
              id="close-mobile-sidebar"
              class="text-gray-300 hover:text-white transition-colors"
            >
              <i class="fas fa-times w-6 h-6"></i>
            </button>
          </div>

          <nav class="flex-1 px-3 py-6 space-y-2">
            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-home w-5 h-5 mr-3"></i>
              <span>Trang chủ</span>
            </a>

            <a href="#" class="sidebar-link active flex items-center px-4 py-3">
              <i class="fas fa-users w-5 h-5 mr-3"></i>
              <span>Quản lý người dùng</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-database w-5 h-5 mr-3"></i>
              <span>Quản lý bất động sản</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-chart-pie w-5 h-5 mr-3"></i>
              <span>Thống kê báo cáo</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-shield-alt w-5 h-5 mr-3"></i>
              <span>Giám sát & Sự cố</span>
            </a>

            <a href="#" class="sidebar-link flex items-center px-4 py-3">
              <i class="fas fa-cog w-5 h-5 mr-3"></i>
              <span>Cài đặt</span>
            </a>
          </nav>
        </div>
      </div>

      <!-- Main Content -->
      <main class="flex-1 md:ml-64 px-4 py-8 md:py-6 mt-16 md:mt-0">
        <div class="max-w-7xl mx-auto">
          <!-- Page Header -->
          <div class="mb-8">
            <div class="glass-effect rounded-2xl p-6 card-modern">
              <h1
                class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"
              >
                Quản lý tài khoản người dùng
              </h1>
              <p class="mt-2 text-gray-600 font-medium">
                Quản lý và giám sát tất cả người dùng trong hệ thống.
              </p>
            </div>
          </div>

          <!-- Action Bar -->
          <div class="glass-effect rounded-2xl card-modern mb-6">
            <div class="p-5 flex flex-wrap items-center justify-between gap-4">
              <!-- Search -->
              <div class="relative flex-1 min-w-[240px] search-box">
                <input
                  type="text"
                  id="search-input"
                  placeholder="Tìm kiếm theo tên, email, số điện thoại..."
                  class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-transparent input-modern"
                />
                <i
                  class="fas fa-search absolute left-4 top-4 h-5 w-5 text-gray-400"
                ></i>
              </div>

              <!-- Filters -->
              <div class="flex flex-wrap items-center gap-3">
                <!-- Filter by Role -->
                <div>
                  <select
                    id="role-filter"
                    class="border-2 border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:border-indigo-500 bg-white input-modern font-medium"
                  >
                    <option value="">Tất cả vai trò</option>
                    <option value="admin">Admin</option>
                    <option value="landlord">Chủ nhà</option>
                    <option value="tenant">Người thuê</option>
                  </select>
                </div>

                <!-- Filter by Status -->
                <div>
                  <select
                    id="status-filter"
                    class="border-2 border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:border-indigo-500 bg-white input-modern font-medium"
                  >
                    <option value="">Tất cả trạng thái</option>
                    <option value="active">Hoạt động</option>
                    <option value="inactive">Không hoạt động</option>
                    <option value="pending">Chờ xác nhận</option>
                    <option value="suspended">Tạm khóa</option>
                  </select>
                </div>

                <!-- Filter by Registration Date -->
                <div>
                  <select
                    id="date-filter"
                    class="border-2 border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:border-indigo-500 bg-white input-modern font-medium"
                  >
                    <option value="">Tất cả thời gian</option>
                    <option value="last30days">30 ngày gần đây</option>
                    <option value="thisMonth">Tháng này</option>
                    <option value="lastMonth">Tháng trước</option>
                  </select>
                </div>

                <!-- Reset Filters -->
                <button
                  id="reset-filters"
                  class="text-indigo-600 hover:text-indigo-800 font-semibold transition-colors"
                >
                  <i class="fas fa-redo mr-1"></i>
                  Đặt lại
                </button>
              </div>

              <!-- Actions -->
              <div class="flex items-center gap-3">
                <button
                  id="delete-selected-button"
                  class="hidden items-center gap-2 px-5 py-3 text-white rounded-xl font-semibold btn-danger"
                >
                  <i class="fas fa-trash"></i>
                  <span>Xóa (<span id="selected-count">0</span>)</span>
                </button>

                <button
                  id="add-user-button"
                  class="flex items-center gap-2 px-5 py-3 text-white rounded-xl font-semibold btn-primary"
                >
                  <i class="fas fa-user-plus"></i>
                  <span>Thêm người dùng</span>
                </button>

                <div class="dropdown">
                  <button
                    class="flex items-center justify-center w-11 h-11 border-2 border-gray-200 rounded-xl hover:border-indigo-500 transition-colors bg-white"
                  >
                    <i class="fas fa-ellipsis-v text-gray-600"></i>
                  </button>

                  <div class="dropdown-content">
                    <div class="py-1">
                      <a
                        href="#"
                        class="flex items-center px-4 py-3 text-sm text-gray-700 font-medium"
                      >
                        <i class="fas fa-download w-4 h-4 mr-3"></i>
                        Xuất danh sách
                      </a>
                      <a
                        href="#"
                        class="flex items-center px-4 py-3 text-sm text-gray-700 font-medium"
                      >
                        <i class="fas fa-upload w-4 h-4 mr-3"></i>
                        Nhập từ Excel
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Users Table -->
          <div class="glass-effect rounded-2xl overflow-hidden card-modern">
            <div id="loading-indicator" class="p-12 text-center">
              <div class="inline-block spinner"></div>
              <p class="mt-4 text-gray-600 font-medium">
                Đang tải dữ liệu người dùng...
              </p>
            </div>

            <div
              id="empty-results"
              class="p-12 text-center"
              style="display: none"
            >
              <div
                class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 text-indigo-600 mb-4"
              >
                <i class="fas fa-exclamation-circle text-3xl"></i>
              </div>
              <p class="text-xl font-bold text-gray-900 mb-2">
                Không tìm thấy người dùng
              </p>
              <p class="text-gray-600 mb-6">
                Không có người dùng nào phù hợp với điều kiện tìm kiếm.
              </p>
              <button
                id="reset-filters-btn"
                class="px-6 py-3 text-white rounded-xl font-semibold btn-primary"
              >
                Đặt lại bộ lọc
              </button>
            </div>

            <div
              id="users-table-container"
              class="overflow-x-auto"
              style="display: none"
            >
              <table class="min-w-full">
                <thead class="header-gradient">
                  <tr>
                    <th class="px-5 py-4 w-10">
                      <input
                        type="checkbox"
                        id="select-all"
                        class="checkbox-modern"
                      />
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer"
                      data-sort="id"
                    >
                      <div class="flex items-center">
                        <span>ID</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer"
                      data-sort="fullName"
                    >
                      <div class="flex items-center">
                        <span>Người dùng</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hidden sm:table-cell"
                      data-sort="email"
                    >
                      <div class="flex items-center">
                        <span>Email</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden md:table-cell"
                      data-sort="phone"
                    >
                      <div class="flex items-center">
                        <span>Số điện thoại</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer"
                      data-sort="role"
                    >
                      <div class="flex items-center">
                        <span>Vai trò</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer"
                      data-sort="status"
                    >
                      <div class="flex items-center">
                        <span>Trạng thái</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider cursor-pointer hidden lg:table-cell"
                      data-sort="createdAt"
                    >
                      <div class="flex items-center">
                        <span>Ngày đăng ký</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell"
                      data-sort="lastLogin"
                    >
                      <div class="flex items-center">
                        <span>Đăng nhập cuối</span>
                        <span class="sort-indicator ml-2"></span>
                      </div>
                    </th>
                    <th
                      class="px-5 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider w-20"
                    >
                      Thao tác
                    </th>
                  </tr>
                </thead>
                <tbody id="users-table-body" class="bg-white">
                  <!-- User rows will be inserted here by JavaScript -->
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div
              id="pagination"
              class="px-6 py-4 flex items-center justify-between border-t border-gray-200"
              style="display: none"
            >
              <div class="flex-1 flex justify-between sm:hidden">
                <button
                  id="prev-page-mobile"
                  class="relative inline-flex items-center px-4 py-2 border-2 border-gray-300 text-sm font-semibold rounded-xl bg-white text-gray-700 hover:bg-gray-50"
                >
                  Trước
                </button>
                <button
                  id="next-page-mobile"
                  class="relative inline-flex items-center px-4 py-2 border-2 border-gray-300 text-sm font-semibold rounded-xl bg-white text-gray-700 hover:bg-gray-50"
                >
                  Sau
                </button>
              </div>
              <div
                class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"
              >
                <div>
                  <p class="text-sm text-gray-700 font-medium">
                    Hiển thị
                    <span id="from-item" class="font-bold text-indigo-600"
                      >1</span
                    >
                    đến
                    <span id="to-item" class="font-bold text-indigo-600"
                      >10</span
                    >
                    trong số
                    <span id="total-items" class="font-bold text-indigo-600"
                      >0</span
                    >
                    người dùng
                  </p>
                </div>
                <div>
                  <nav
                    class="relative z-0 inline-flex rounded-xl shadow-sm -space-x-px"
                    aria-label="Pagination"
                  >
                    <button
                      id="prev-page"
                      class="relative inline-flex items-center px-3 py-2 rounded-l-xl border-2 border-gray-300 bg-white text-sm font-semibold text-gray-500 hover:bg-gray-50"
                    >
                      <span class="sr-only">Trước</span>
                      <i class="fas fa-chevron-left h-5 w-5"></i>
                    </button>

                    <div id="pagination-numbers" class="flex">
                      <!-- Page numbers will be inserted here by JavaScript -->
                    </div>

                    <button
                      id="next-page"
                      class="relative inline-flex items-center px-3 py-2 rounded-r-xl border-2 border-gray-300 bg-white text-sm font-semibold text-gray-500 hover:bg-gray-50"
                    >
                      <span class="sr-only">Sau</span>
                      <i class="fas fa-chevron-right h-5 w-5"></i>
                    </button>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Add/Edit User Modal -->
    <div id="user-modal" class="modal">
      <div
        class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"
      >
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
          <div
            id="modal-backdrop"
            class="absolute inset-0 bg-gray-900 opacity-75"
          ></div>
        </div>

        <span
          class="hidden sm:inline-block sm:align-middle sm:h-screen"
          aria-hidden="true"
          >&#8203;</span
        >

        <div
          class="inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full modal-content"
        >
          <form id="user-form">
            <div
              class="bg-gradient-to-br from-indigo-50 to-purple-50 px-6 py-6"
            >
              <div class="text-center">
                <div
                  class="mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4"
                >
                  <i class="fas fa-user-plus text-white text-2xl"></i>
                </div>
                <h3
                  id="modal-title"
                  class="text-2xl leading-6 font-bold text-gray-900"
                >
                  Thêm người dùng mới
                </h3>
                <p
                  id="modal-subtitle"
                  class="mt-2 text-sm text-gray-600 font-medium"
                >
                  Nhập thông tin người dùng mới
                </p>
              </div>
            </div>

            <div class="bg-white px-6 py-6 space-y-5">
              <div>
                <label
                  for="fullName"
                  class="block text-sm font-bold text-gray-700 mb-2"
                >
                  Họ và tên
                </label>
                <input
                  type="text"
                  id="fullName"
                  name="fullName"
                  class="block w-full border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  required
                />
              </div>

              <div>
                <label
                  for="email"
                  class="block text-sm font-bold text-gray-700 mb-2"
                >
                  Email
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="block w-full border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  required
                />
              </div>

              <div>
                <label
                  for="phone"
                  class="block text-sm font-bold text-gray-700 mb-2"
                >
                  Số điện thoại
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="block w-full border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  required
                />
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label
                    for="role"
                    class="block text-sm font-bold text-gray-700 mb-2"
                  >
                    Vai trò
                  </label>
                  <select
                    id="role"
                    name="role"
                    class="block w-full bg-white border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  >
                    <option value="tenant">Người thuê</option>
                    <option value="landlord">Chủ nhà</option>
                    <option value="admin">Admin</option>
                  </select>
                </div>

                <div>
                  <label
                    for="status"
                    class="block text-sm font-bold text-gray-700 mb-2"
                  >
                    Trạng thái
                  </label>
                  <select
                    id="status"
                    name="status"
                    class="block w-full bg-white border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  >
                    <option value="active">Hoạt động</option>
                    <option value="inactive">Không hoạt động</option>
                    <option value="pending">Chờ xác nhận</option>
                    <option value="suspended">Tạm khóa</option>
                  </select>
                </div>
              </div>

              <div id="password-fields" class="space-y-5">
                <div>
                  <label
                    for="password"
                    class="block text-sm font-bold text-gray-700 mb-2"
                  >
                    Mật khẩu
                  </label>
                  <input
                    type="password"
                    id="password"
                    name="password"
                    class="block w-full border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  />
                </div>

                <div>
                  <label
                    for="confirmPassword"
                    class="block text-sm font-bold text-gray-700 mb-2"
                  >
                    Xác nhận mật khẩu
                  </label>
                  <input
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    class="block w-full border-2 border-gray-200 rounded-xl shadow-sm py-3 px-4 focus:outline-none focus:border-transparent input-modern"
                  />
                </div>
              </div>
            </div>

            <div
              class="bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end gap-3"
            >
              <button
                type="button"
                id="cancel-modal"
                class="w-full sm:w-auto inline-flex justify-center rounded-xl border-2 border-gray-300 shadow-sm px-6 py-3 bg-white text-base font-semibold text-gray-700 hover:bg-gray-50 focus:outline-none transition-all"
              >
                Hủy
              </button>
              <button
                type="submit"
                class="w-full sm:w-auto inline-flex justify-center rounded-xl shadow-sm px-6 py-3 text-base font-semibold text-white focus:outline-none btn-primary"
                id="submit-user-btn"
              >
                Thêm người dùng
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // ----- Variables -----
        let users = [];
        let filteredUsers = [];
        let selectedUsers = [];
        let currentPage = 1;
        const usersPerPage = 8;
        let sortConfig = { key: "createdAt", direction: "desc" };
        let modalMode = "add";
        let currentUser = null;

        // ----- DOM Elements -----
        const loadingIndicator = document.getElementById("loading-indicator");
        const usersTableContainer = document.getElementById(
          "users-table-container",
        );
        const usersTableBody = document.getElementById("users-table-body");
        const emptyResults = document.getElementById("empty-results");
        const pagination = document.getElementById("pagination");
        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileSidebar = document.getElementById("mobile-sidebar");
        const closeMobileSidebar = document.getElementById(
          "close-mobile-sidebar",
        );
        const mobileSidebarBackdrop = document.getElementById(
          "mobile-sidebar-backdrop",
        );
        const searchInput = document.getElementById("search-input");
        const roleFilter = document.getElementById("role-filter");
        const statusFilter = document.getElementById("status-filter");
        const dateFilter = document.getElementById("date-filter");
        const resetFiltersBtn = document.getElementById("reset-filters");
        const resetFiltersBtnEmpty =
          document.getElementById("reset-filters-btn");
        const deleteSelectedButton = document.getElementById(
          "delete-selected-button",
        );
        const selectedCountSpan = document.getElementById("selected-count");
        const selectAllCheckbox = document.getElementById("select-all");
        const addUserButton = document.getElementById("add-user-button");
        const userModal = document.getElementById("user-modal");
        const userForm = document.getElementById("user-form");
        const cancelModal = document.getElementById("cancel-modal");
        const modalBackdrop = document.getElementById("modal-backdrop");
        const modalTitle = document.getElementById("modal-title");
        const modalSubtitle = document.getElementById("modal-subtitle");
        const submitUserBtn = document.getElementById("submit-user-btn");
        const passwordFields = document.getElementById("password-fields");
        const prevPage = document.getElementById("prev-page");
        const nextPage = document.getElementById("next-page");
        const prevPageMobile = document.getElementById("prev-page-mobile");
        const nextPageMobile = document.getElementById("next-page-mobile");
        const paginationNumbers = document.getElementById("pagination-numbers");
        const fromItem = document.getElementById("from-item");
        const toItem = document.getElementById("to-item");
        const totalItems = document.getElementById("total-items");

        // ----- Event Listeners -----

        // Mobile Sidebar Toggle
        mobileMenuButton.addEventListener("click", function () {
          mobileSidebar.style.display = "block";
          setTimeout(() => {
            document
              .querySelector("#mobile-sidebar .mobile-sidebar")
              .classList.add("show");
          }, 50);
        });

        function closeMobileSidebarHandler() {
          document
            .querySelector("#mobile-sidebar .mobile-sidebar")
            .classList.remove("show");
          setTimeout(() => {
            mobileSidebar.style.display = "none";
          }, 300);
        }

        closeMobileSidebar.addEventListener("click", closeMobileSidebarHandler);
        mobileSidebarBackdrop.addEventListener(
          "click",
          closeMobileSidebarHandler,
        );

        // Dropdown Toggle
        document.querySelectorAll(".dropdown button").forEach((button) => {
          button.addEventListener("click", function () {
            const dropdown =
              this.parentElement.querySelector(".dropdown-content");
            dropdown.classList.toggle("show");
          });
        });

        // Close dropdowns when clicking outside
        window.addEventListener("click", function (e) {
          if (
            !e.target.matches(".dropdown button") &&
            !e.target.closest(".dropdown button")
          ) {
            document
              .querySelectorAll(".dropdown-content")
              .forEach((dropdown) => {
                if (dropdown.classList.contains("show")) {
                  dropdown.classList.remove("show");
                }
              });
          }
        });

        // Search and Filters
        searchInput.addEventListener("input", applyFilters);
        roleFilter.addEventListener("change", applyFilters);
        statusFilter.addEventListener("change", applyFilters);
        dateFilter.addEventListener("change", applyFilters);

        // Reset Filters
        resetFiltersBtn.addEventListener("click", resetFilters);
        resetFiltersBtnEmpty.addEventListener("click", resetFilters);

        // Add User
        addUserButton.addEventListener("click", function () {
          showModal("add");
        });

        // Cancel Modal
        cancelModal.addEventListener("click", hideModal);
        modalBackdrop.addEventListener("click", hideModal);

        // Submit User Form
        userForm.addEventListener("submit", function (e) {
          e.preventDefault();
          handleSubmitForm();
        });

        // Select All Checkbox
        selectAllCheckbox.addEventListener("change", handleSelectAll);

        // Delete Selected Users
        deleteSelectedButton.addEventListener("click", handleDeleteSelected);

        // Sort Table Headers
        document.querySelectorAll("th[data-sort]").forEach((header) => {
          header.addEventListener("click", function () {
            const key = this.getAttribute("data-sort");
            requestSort(key);
          });
        });

        // Pagination
        prevPage.addEventListener("click", function () {
          if (currentPage > 1) {
            goToPage(currentPage - 1);
          }
        });

        nextPage.addEventListener("click", function () {
          const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
          if (currentPage < totalPages) {
            goToPage(currentPage + 1);
          }
        });

        prevPageMobile.addEventListener("click", function () {
          if (currentPage > 1) {
            goToPage(currentPage - 1);
          }
        });

        nextPageMobile.addEventListener("click", function () {
          const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
          if (currentPage < totalPages) {
            goToPage(currentPage + 1);
          }
        });

        // ----- Functions -----

        // Fetch Users Data
        function fetchUsers() {
          // Mock API Request
          setTimeout(() => {
            const mockUsers = [
              {
                id: 1,
                fullName: "Nguyễn Văn An",
                email: "nguyenvanan@example.com",
                phone: "0987654321",
                role: "tenant",
                status: "active",
                createdAt: "2026-01-15",
                lastLogin: "2026-02-08",
                avatar:
                  "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 2,
                fullName: "Trần Thị Bình",
                email: "tranthib@example.com",
                phone: "0912345678",
                role: "landlord",
                status: "active",
                createdAt: "2026-01-02",
                lastLogin: "2026-02-07",
                avatar:
                  "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 3,
                fullName: "Lê Văn Cường",
                email: "levc@example.com",
                phone: "0976543210",
                role: "admin",
                status: "active",
                createdAt: "2025-11-20",
                lastLogin: "2026-02-09",
                avatar:
                  "https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 4,
                fullName: "Phạm Thị Dung",
                email: "phamd@example.com",
                phone: "0932165478",
                role: "tenant",
                status: "inactive",
                createdAt: "2026-01-10",
                lastLogin: "2026-01-20",
                avatar:
                  "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 5,
                fullName: "Hoàng Văn Eo",
                email: "hoangve@example.com",
                phone: "0945678912",
                role: "landlord",
                status: "suspended",
                createdAt: "2026-01-05",
                lastLogin: "2026-01-15",
                avatar:
                  "https://images.unsplash.com/photo-1463453091185-61582044d556?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 6,
                fullName: "Ngô Thị Giang",
                email: "ngotg@example.com",
                phone: "0956789123",
                role: "tenant",
                status: "active",
                createdAt: "2025-12-12",
                lastLogin: "2026-02-05",
                avatar:
                  "https://images.unsplash.com/photo-1580489944761-15a19d654956?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 7,
                fullName: "Vũ Đình Hoàng",
                email: "vudh@example.com",
                phone: "0967891234",
                role: "tenant",
                status: "pending",
                createdAt: "2026-01-25",
                lastLogin: "",
                avatar:
                  "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 8,
                fullName: "Mai Văn Kiên",
                email: "maivk@example.com",
                phone: "0978912345",
                role: "tenant",
                status: "active",
                createdAt: "2025-12-01",
                lastLogin: "2026-02-01",
                avatar:
                  "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 9,
                fullName: "Đặng Thị Lan",
                email: "dangtl@example.com",
                phone: "0989123456",
                role: "landlord",
                status: "active",
                createdAt: "2025-11-15",
                lastLogin: "2026-01-28",
                avatar:
                  "https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=40&h=40&fit=crop&crop=faces",
              },
              {
                id: 10,
                fullName: "Trịnh Văn Minh",
                email: "trinhvm@example.com",
                phone: "0990123456",
                role: "tenant",
                status: "active",
                createdAt: "2025-12-20",
                lastLogin: "2026-02-06",
                avatar:
                  "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=40&h=40&fit=crop&crop=faces",
              },
            ];

            users = mockUsers;
            filteredUsers = [...users];

            // Apply initial sort
            applySort();

            // Hide loading indicator
            loadingIndicator.style.display = "none";

            // Show table
            updateTable();
          }, 1000);
        }

        // Apply Filters
        function applyFilters() {
          const searchTerm = searchInput.value.toLowerCase();
          const role = roleFilter.value;
          const status = statusFilter.value;
          const date = dateFilter.value;

          filteredUsers = users.filter((user) => {
            // Search filter
            const matchesSearch =
              searchTerm === "" ||
              user.fullName.toLowerCase().includes(searchTerm) ||
              user.email.toLowerCase().includes(searchTerm) ||
              user.phone.includes(searchTerm);

            // Role filter
            const matchesRole = role === "" || user.role === role;

            // Status filter
            const matchesStatus = status === "" || user.status === status;

            // Date filter
            let matchesDate = true;
            if (date === "last30days") {
              const today = new Date();
              const thirtyDaysAgo = new Date();
              thirtyDaysAgo.setDate(today.getDate() - 30);

              const createdDate = new Date(user.createdAt);
              matchesDate = createdDate >= thirtyDaysAgo;
            }

            return matchesSearch && matchesRole && matchesStatus && matchesDate;
          });

          // Apply sort
          applySort();

          // Reset to first page
          currentPage = 1;

          // Update table
          updateTable();
        }

        // Reset Filters
        function resetFilters() {
          searchInput.value = "";
          roleFilter.value = "";
          statusFilter.value = "";
          dateFilter.value = "";

          applyFilters();
        }

        // Show Modal
        function showModal(mode, user = null) {
          modalMode = mode;
          currentUser = user;

          // Update modal title and button text
          if (mode === "add") {
            modalTitle.textContent = "Thêm người dùng mới";
            modalSubtitle.textContent = "Nhập thông tin người dùng mới";
            submitUserBtn.textContent = "Thêm người dùng";
            passwordFields.style.display = "block";

            // Reset form
            userForm.reset();
            document.getElementById("role").value = "tenant";
            document.getElementById("status").value = "active";
          } else {
            modalTitle.textContent = "Chỉnh sửa người dùng";
            modalSubtitle.textContent = "Cập nhật thông tin người dùng";
            submitUserBtn.textContent = "Lưu thay đổi";
            passwordFields.style.display = "none";

            // Fill form with user data
            document.getElementById("fullName").value = user.fullName;
            document.getElementById("email").value = user.email;
            document.getElementById("phone").value = user.phone;
            document.getElementById("role").value = user.role;
            document.getElementById("status").value = user.status;
          }

          // Show modal
          userModal.classList.add("show");
        }

        // Hide Modal
        function hideModal() {
          userModal.classList.remove("show");
        }

        // Handle Form Submission
        function handleSubmitForm() {
          const fullName = document.getElementById("fullName").value;
          const email = document.getElementById("email").value;
          const phone = document.getElementById("phone").value;
          const role = document.getElementById("role").value;
          const status = document.getElementById("status").value;

          if (modalMode === "add") {
            const password = document.getElementById("password").value;
            const confirmPassword =
              document.getElementById("confirmPassword").value;

            if (password !== confirmPassword) {
              alert("Mật khẩu không khớp. Vui lòng kiểm tra lại.");
              return;
            }

            // Add new user
            const newUser = {
              id: users.length + 1,
              fullName,
              email,
              phone,
              role,
              status,
              createdAt: new Date().toISOString().split("T")[0],
              lastLogin: "",
              avatar:
                "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=40&h=40&fit=crop&crop=faces",
            };

            users.push(newUser);
          } else {
            // Update existing user
            const updatedUsers = users.map((user) =>
              user.id === currentUser.id
                ? { ...user, fullName, email, phone, role, status }
                : user,
            );

            users = updatedUsers;
          }

          // Apply filters to update filtered users
          applyFilters();

          // Hide modal
          hideModal();
        }

        // Handle Select All
        function handleSelectAll(e) {
          const isChecked = e.target.checked;

          // Get current page users
          const startIndex = (currentPage - 1) * usersPerPage;
          const endIndex = Math.min(
            startIndex + usersPerPage,
            filteredUsers.length,
          );
          const currentPageUsers = filteredUsers.slice(startIndex, endIndex);

          if (isChecked) {
            // Add all current page users to selected
            currentPageUsers.forEach((user) => {
              if (!selectedUsers.includes(user.id)) {
                selectedUsers.push(user.id);
              }
            });
          } else {
            // Remove all current page users from selected
            selectedUsers = selectedUsers.filter(
              (id) => !currentPageUsers.some((user) => user.id === id),
            );
          }

          // Update UI
          updateSelectedUI();
          renderTable();
        }

        // Handle Delete Selected
        function handleDeleteSelected() {
          if (selectedUsers.length === 0) return;

          if (
            confirm(
              `Bạn có chắc chắn muốn xóa ${selectedUsers.length} người dùng đã chọn?`,
            )
          ) {
            // Delete selected users
            users = users.filter((user) => !selectedUsers.includes(user.id));

            // Reset selected
            selectedUsers = [];

            // Update table
            applyFilters();
          }
        }

        // Update Selected UI
        function updateSelectedUI() {
          if (selectedUsers.length > 0) {
            deleteSelectedButton.style.display = "flex";
            selectedCountSpan.textContent = selectedUsers.length;
          } else {
            deleteSelectedButton.style.display = "none";
          }
        }

        // Handle Delete User
        function handleDeleteUser(userId) {
          if (confirm("Bạn có chắc chắn muốn xóa người dùng này?")) {
            // Delete user
            users = users.filter((user) => user.id !== userId);

            // Remove from selected if needed
            selectedUsers = selectedUsers.filter((id) => id !== userId);

            // Update table
            applyFilters();
          }
        }

        // Handle Edit User
        function handleEditUser(userId) {
          const user = users.find((user) => user.id === userId);
          showModal("edit", user);
        }

        // Request Sort
        function requestSort(key) {
          let direction = "asc";
          if (sortConfig.key === key && sortConfig.direction === "asc") {
            direction = "desc";
          }

          sortConfig = { key, direction };
          applySort();
          renderTable();
        }

        // Apply Sort
        function applySort() {
          if (sortConfig.key) {
            filteredUsers.sort((a, b) => {
              if (a[sortConfig.key] < b[sortConfig.key]) {
                return sortConfig.direction === "asc" ? -1 : 1;
              }
              if (a[sortConfig.key] > b[sortConfig.key]) {
                return sortConfig.direction === "asc" ? 1 : -1;
              }
              return 0;
            });
          }

          // Update sort indicators
          document.querySelectorAll(".sort-indicator").forEach((indicator) => {
            indicator.textContent = "";
          });

          const currentSortHeader = document.querySelector(
            `th[data-sort="${sortConfig.key}"] .sort-indicator`,
          );
          if (currentSortHeader) {
            currentSortHeader.textContent =
              sortConfig.direction === "asc" ? "▲" : "▼";
          }
        }

        // Go To Page
        function goToPage(page) {
          currentPage = page;
          renderTable();
          updatePagination();
        }

        // Update Table
        function updateTable() {
          if (filteredUsers.length === 0) {
            usersTableContainer.style.display = "none";
            pagination.style.display = "none";
            emptyResults.style.display = "block";
          } else {
            usersTableContainer.style.display = "block";
            pagination.style.display = "flex";
            emptyResults.style.display = "none";

            renderTable();
            updatePagination();
          }

          // Update selected UI
          updateSelectedUI();
        }

        // Render Table
        function renderTable() {
          // Calculate pagination
          const startIndex = (currentPage - 1) * usersPerPage;
          const endIndex = Math.min(
            startIndex + usersPerPage,
            filteredUsers.length,
          );
          const currentPageUsers = filteredUsers.slice(startIndex, endIndex);

          // Clear table body
          usersTableBody.innerHTML = "";

          // Update pagination info
          fromItem.textContent = filteredUsers.length > 0 ? startIndex + 1 : 0;
          toItem.textContent = endIndex;
          totalItems.textContent = filteredUsers.length;

          // Check if all current page users are selected
          const areAllSelected =
            currentPageUsers.length > 0 &&
            currentPageUsers.every((user) => selectedUsers.includes(user.id));
          selectAllCheckbox.checked = areAllSelected;

          // Render rows
          currentPageUsers.forEach((user) => {
            const row = document.createElement("tr");
            row.className = "table-row border-b border-gray-100";

            // Format user data for display
            const roleLabel =
              user.role === "admin"
                ? "Admin"
                : user.role === "landlord"
                  ? "Chủ nhà"
                  : "Người thuê";

            const roleClass =
              user.role === "admin"
                ? "bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800"
                : user.role === "landlord"
                  ? "bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800"
                  : "bg-gradient-to-r from-green-100 to-green-200 text-green-800";

            const statusLabel =
              user.status === "active"
                ? "Hoạt động"
                : user.status === "inactive"
                  ? "Không hoạt động"
                  : user.status === "pending"
                    ? "Chờ xác nhận"
                    : "Tạm khóa";

            const statusClass =
              user.status === "active"
                ? "bg-gradient-to-r from-green-100 to-emerald-200 text-green-800"
                : user.status === "inactive"
                  ? "bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800"
                  : user.status === "pending"
                    ? "bg-gradient-to-r from-yellow-100 to-amber-200 text-yellow-800"
                    : "bg-gradient-to-r from-red-100 to-red-200 text-red-800";

            const isSelected = selectedUsers.includes(user.id);

            row.innerHTML = `
                        <td class="px-5 py-4">
                            <input 
                                type="checkbox" 
                                data-user-id="${user.id}"
                                class="user-checkbox checkbox-modern"
                                ${isSelected ? "checked" : ""}
                            />
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-sm font-bold text-indigo-600">
                            #${getUserIndexInList(user.id)}
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10">
                                    <img class="h-10 w-10 rounded-full object-cover avatar-ring" src="${user.avatar}" alt="" />
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-bold text-gray-900">${user.fullName}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-sm text-gray-600 font-medium hidden sm:table-cell">
                            ${user.email}
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-sm text-gray-600 font-medium hidden md:table-cell">
                            ${user.phone}
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap">
                            <span class="badge-modern ${roleClass}">
                                ${roleLabel}
                            </span>
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap">
                            <span class="badge-modern ${statusClass}">
                                ${statusLabel}
                            </span>
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-sm text-gray-600 font-medium hidden lg:table-cell">
                            ${user.createdAt}
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-sm text-gray-600 font-medium hidden lg:table-cell">
                            ${user.lastLogin || "Chưa đăng nhập"}
                        </td>
                        <td class="px-5 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <div class="dropdown">
                                <button class="text-gray-500 hover:text-indigo-600 transition-colors">
                                    <i class="fas fa-ellipsis-v h-5 w-5"></i>
                                </button>
                                
                                <div class="dropdown-content">
                                    <div class="py-1">
                                        <button
                                            data-edit-id="${user.id}"
                                            class="edit-user-btn flex items-center w-full px-4 py-3 text-sm text-gray-700 font-medium"
                                        >
                                            <i class="fas fa-edit w-4 h-4 mr-3"></i>
                                            Chỉnh sửa
                                        </button>
                                        <button
                                            data-delete-id="${user.id}"
                                            class="delete-user-btn flex items-center w-full px-4 py-3 text-sm text-red-600 font-medium"
                                        >
                                            <i class="fas fa-trash w-4 h-4 mr-3"></i>
                                            Xóa
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </td>
                    `;

            usersTableBody.appendChild(row);
          });

          // Add event listeners to checkboxes
          document.querySelectorAll(".user-checkbox").forEach((checkbox) => {
            checkbox.addEventListener("change", function () {
              const userId = parseInt(this.getAttribute("data-user-id"));

              if (this.checked) {
                if (!selectedUsers.includes(userId)) {
                  selectedUsers.push(userId);
                }
              } else {
                selectedUsers = selectedUsers.filter((id) => id !== userId);
              }

              updateSelectedUI();
            });
          });

          // Add event listeners to edit buttons
          document.querySelectorAll(".edit-user-btn").forEach((button) => {
            button.addEventListener("click", function () {
              const userId = parseInt(this.getAttribute("data-edit-id"));
              handleEditUser(userId);
            });
          });

          // Add event listeners to delete buttons
          document.querySelectorAll(".delete-user-btn").forEach((button) => {
            button.addEventListener("click", function () {
              const userId = parseInt(this.getAttribute("data-delete-id"));
              handleDeleteUser(userId);
            });
          });
        }

        // Update Pagination
        function updatePagination() {
          const totalPages = Math.ceil(filteredUsers.length / usersPerPage);

          // Update buttons state
          prevPage.disabled = currentPage === 1;
          nextPage.disabled = currentPage === totalPages;
          prevPageMobile.disabled = currentPage === 1;
          nextPageMobile.disabled = currentPage === totalPages;

          // Add visual indicator for disabled buttons
          if (currentPage === 1) {
            prevPage.classList.add("text-gray-300", "cursor-not-allowed");
            prevPageMobile.classList.add("text-gray-300", "cursor-not-allowed");
          } else {
            prevPage.classList.remove("text-gray-300", "cursor-not-allowed");
            prevPageMobile.classList.remove(
              "text-gray-300",
              "cursor-not-allowed",
            );
          }

          if (currentPage === totalPages) {
            nextPage.classList.add("text-gray-300", "cursor-not-allowed");
            nextPageMobile.classList.add("text-gray-300", "cursor-not-allowed");
          } else {
            nextPage.classList.remove("text-gray-300", "cursor-not-allowed");
            nextPageMobile.classList.remove(
              "text-gray-300",
              "cursor-not-allowed",
            );
          }

          // Generate page numbers
          paginationNumbers.innerHTML = "";

          for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement("button");
            pageButton.textContent = i;
            pageButton.classList.add(
              "page-number",
              "relative",
              "inline-flex",
              "items-center",
              "px-4",
              "py-2",
              "border-2",
              "text-sm",
              "font-bold",
            );

            if (i === currentPage) {
              pageButton.classList.add("active");
            } else {
              pageButton.classList.add(
                "bg-white",
                "border-gray-300",
                "text-gray-700",
                "hover:bg-gray-50",
              );
            }

            pageButton.addEventListener("click", function () {
              goToPage(i);
            });

            paginationNumbers.appendChild(pageButton);
          }
        }

        // Get User Index in List
        function getUserIndexInList(userId) {
          return users.findIndex((user) => user.id === userId) + 1;
        }

        // Initialize the page
        fetchUsers();
      });
    </script>
  </body>
</html>
